// Original: The MIT License (MIT) Copyright (c) 2016 Photopea
// Edited: The MIT License (MIT) Copytright (c) 2020 ycw
var Typr={parse:function(r){var e=function(r,e,t,a){Typr.B;var n=Typr.T,s={cmap:n.cmap,head:n.head,hhea:n.hhea,maxp:n.maxp,hmtx:n.hmtx,name:n.name,"OS/2":n.OS2,post:n.post,loca:n.loca,kern:n.kern,glyf:n.glyf,"CFF ":n.CFF,"SVG ":n.SVG},o={_data:r,_index:e,_offset:t};for(var i in s){var h=Typr.findTable(r,i,t);if(h){var f=h[0],d=a[f];null==d&&(d=s[i].parseTab(r,f,h[1],o)),o[i]=a[f]=d}}return o},t=Typr.B,a=new Uint8Array(r),n={};if("ttcf"==t.readASCII(a,0,4)){var s=4;t.readUshort(a,s);s+=2;t.readUshort(a,s);s+=2;var o=t.readUint(a,s);s+=4;for(var i=[],h=0;h<o;h++){var f=t.readUint(a,s);s+=4,i.push(e(a,h,f,n))}return i}return[e(a,0,0,n)]},findTable:function(r,e,t){for(var a=Typr.B,n=a.readUshort(r,t+4),s=t+12,o=0;o<n;o++){var i=a.readASCII(r,s,4),h=(a.readUint(r,s+4),a.readUint(r,s+8)),f=a.readUint(r,s+12);if(i==e)return[h,f];s+=16}return null},T:{}};Typr.B={readFixed:function(r,e){return(r[e]<<8|r[e+1])+(r[e+2]<<8|r[e+3])/65540},readF2dot14:function(r,e){return Typr.B.readShort(r,e)/16384},readInt:function(r,e){var t=Typr.B.t.uint8;return t[0]=r[e+3],t[1]=r[e+2],t[2]=r[e+1],t[3]=r[e],Typr.B.t.int32[0]},readInt8:function(r,e){return Typr.B.t.uint8[0]=r[e],Typr.B.t.int8[0]},readShort:function(r,e){var t=Typr.B.t.uint8;return t[1]=r[e],t[0]=r[e+1],Typr.B.t.int16[0]},readUshort:function(r,e){return r[e]<<8|r[e+1]},writeUshort:function(r,e,t){r[e]=t>>8&255,r[e+1]=255&t},readUshorts:function(r,e,t){for(var a=[],n=0;n<t;n++){var s=Typr.B.readUshort(r,e+2*n);a.push(s)}return a},readUint:function(r,e){var t=Typr.B.t.uint8;return t[3]=r[e],t[2]=r[e+1],t[1]=r[e+2],t[0]=r[e+3],Typr.B.t.uint32[0]},writeUint:function(r,e,t){r[e]=t>>24&255,r[e+1]=t>>16&255,r[e+2]=t>>8&255,r[e+3]=t>>0&255},readUint64:function(r,e){return 4294967296*Typr.B.readUint(r,e)+Typr.B.readUint(r,e+4)},readASCII:function(r,e,t){for(var a="",n=0;n<t;n++)a+=String.fromCharCode(r[e+n]);return a},writeASCII:function(r,e,t){for(var a=0;a<t.length;a++)r[e+a]=t.charCodeAt(a)},readUnicode:function(r,e,t){for(var a="",n=0;n<t;n++){var s=r[e++]<<8|r[e++];a+=String.fromCharCode(s)}return a},_tdec:window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,e,t){var a=Typr.B._tdec;return a&&0==e&&t==r.length?a.decode(r):Typr.B.readASCII(r,e,t)},readBytes:function(r,e,t){for(var a=[],n=0;n<t;n++)a.push(r[e+n]);return a},readASCIIArray:function(r,e,t){for(var a=[],n=0;n<t;n++)a.push(String.fromCharCode(r[e+n]));return a},t:function(){var r=new ArrayBuffer(8);return{buff:r,int8:new Int8Array(r),uint8:new Uint8Array(r),int16:new Int16Array(r),uint16:new Uint16Array(r),int32:new Int32Array(r),uint32:new Uint32Array(r)}}()},Typr.T.CFF={parseTab:function(r,e,t){var a=Typr.B,n=Typr.T.CFF;(r=new Uint8Array(r.buffer,e,t))[e=0],r[++e],r[++e],r[++e];e++;var s=[];e=n.readIndex(r,e,s);for(var o=[],i=0;i<s.length-1;i++)o.push(a.readASCII(r,e+s[i],s[i+1]-s[i]));e+=s[s.length-1];var h=[];e=n.readIndex(r,e,h);var f=[];for(i=0;i<h.length-1;i++)f.push(n.readDict(r,e+h[i],e+h[i+1]));e+=h[h.length-1];var d=f[0],l=[];e=n.readIndex(r,e,l);var u=[];for(i=0;i<l.length-1;i++)u.push(a.readASCII(r,e+l[i],l[i+1]-l[i]));if(e+=l[l.length-1],n.readSubrs(r,e,d),d.CharStrings&&(d.CharStrings=n.readBytes(r,d.CharStrings)),d.ROS){e=d.FDArray;var p=[];e=n.readIndex(r,e,p),d.FDArray=[];for(i=0;i<p.length-1;i++){var c=n.readDict(r,e+p[i],e+p[i+1]);n._readFDict(r,c,u),d.FDArray.push(c)}e+=p[p.length-1],e=d.FDSelect,d.FDSelect=[];var v=r[e];if(e++,3!=v)throw v;var y=a.readUshort(r,e);e+=2;for(i=0;i<y+1;i++)d.FDSelect.push(a.readUshort(r,e),r[e+2]),e+=3}return d.charset&&(d.charset=n.readCharset(r,d.charset,d.CharStrings.length)),n._readFDict(r,d,u),d},_readFDict:function(r,e,t){var a,n=Typr.T.CFF;for(var s in e.Private&&(a=e.Private[1],e.Private=n.readDict(r,a,a+e.Private[0]),e.Private.Subrs&&n.readSubrs(r,a+e.Private.Subrs,e.Private)),e)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(s)&&(e[s]=t[e[s]-426+35])},readSubrs:function(r,e,t){t.Subrs=Typr.T.CFF.readBytes(r,e);var a,n=t.Subrs.length+1;a=n<1240?107:n<33900?1131:32768,t.Bias=a},readBytes:function(r,e){Typr.B;var t=[];e=Typr.T.CFF.readIndex(r,e,t);for(var a=[],n=t.length-1,s=r.byteOffset+e,o=0;o<n;o++){var i=t[o];a.push(new Uint8Array(r.buffer,s+i,t[o+1]-i))}return a},tableSE:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],glyphByUnicode:function(r,e){for(var t=0;t<r.charset.length;t++)if(r.charset[t]==e)return t;return-1},glyphBySE:function(r,e){return e<0||e>255?-1:Typr.T.CFF.glyphByUnicode(r,Typr.T.CFF.tableSE[e])},readCharset:function(r,e,t){var a=Typr.B,n=[".notdef"],s=r[e];if(e++,0==s)for(var o=0;o<t;o++){var i=a.readUshort(r,e);e+=2,n.push(i)}else{if(1!=s&&2!=s)throw"error: format: "+s;for(;n.length<t;){i=a.readUshort(r,e);e+=2;var h=0;1==s?(h=r[e],e++):(h=a.readUshort(r,e),e+=2);for(o=0;o<=h;o++)n.push(i),i++}}return n},readIndex:function(r,e,t){var a=Typr.B,n=a.readUshort(r,e)+1,s=r[e+=2];if(e++,1==s)for(var o=0;o<n;o++)t.push(r[e+o]);else if(2==s)for(o=0;o<n;o++)t.push(a.readUshort(r,e+2*o));else if(3==s)for(o=0;o<n;o++)t.push(16777215&a.readUint(r,e+3*o-1));else if(4==s)for(o=0;o<n;o++)t.push(a.readUint(r,e+4*o));else if(1!=n)throw"unsupported offset size: "+s+", count: "+n;return(e+=n*s)-1},getCharString:function(r,e,t){var a=Typr.B,n=r[e],s=r[e+1],o=(r[e+2],r[e+3],r[e+4],1),i=null,h=null;n<=20&&(i=n,o=1),12==n&&(i=100*n+s,o=2),21<=n&&n<=27&&(i=n,o=1),28==n&&(h=a.readShort(r,e+1),o=3),29<=n&&n<=31&&(i=n,o=1),32<=n&&n<=246&&(h=n-139,o=1),247<=n&&n<=250&&(h=256*(n-247)+s+108,o=2),251<=n&&n<=254&&(h=256*-(n-251)-s-108,o=2),255==n&&(h=a.readInt(r,e+1)/65535,o=5),t.val=null!=h?h:"o"+i,t.size=o},readCharString:function(r,e,t){for(var a=e+t,n=Typr.B,s=[];e<a;){var o=r[e],i=r[e+1],h=(r[e+2],r[e+3],r[e+4],1),f=null,d=null;o<=20&&(f=o,h=1),12==o&&(f=100*o+i,h=2),19!=o&&20!=o||(f=o,h=2),21<=o&&o<=27&&(f=o,h=1),28==o&&(d=n.readShort(r,e+1),h=3),29<=o&&o<=31&&(f=o,h=1),32<=o&&o<=246&&(d=o-139,h=1),247<=o&&o<=250&&(d=256*(o-247)+i+108,h=2),251<=o&&o<=254&&(d=256*-(o-251)-i-108,h=2),255==o&&(d=n.readInt(r,e+1)/65535,h=5),s.push(null!=d?d:"o"+f),e+=h}return s},readDict:function(r,e,t){for(var a=Typr.B,n={},s=[];e<t;){var o=r[e],i=r[e+1],h=(r[e+2],r[e+3],r[e+4],1),f=null,d=null;if(28==o&&(d=a.readShort(r,e+1),h=3),29==o&&(d=a.readInt(r,e+1),h=5),32<=o&&o<=246&&(d=o-139,h=1),247<=o&&o<=250&&(d=256*(o-247)+i+108,h=2),251<=o&&o<=254&&(d=256*-(o-251)-i-108,h=2),255==o)throw d=a.readInt(r,e+1)/65535,h=5,"unknown number";if(30==o){var l=[];for(h=1;;){var u=r[e+h];h++;var p=u>>4,c=15&u;if(15!=p&&l.push(p),15!=c&&l.push(c),15==c)break}for(var v="",y=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],g=0;g<l.length;g++)v+=y[l[g]];d=parseFloat(v)}if(o<=21)if(f=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][o],h=1,12==o)f=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold","","","LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend","","","","","","","ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][i],h=2;null!=f?(n[f]=1==s.length?s[0]:s,s=[]):s.push(d),e+=h}return n}},Typr.T.cmap={parseTab:function(r,e,t){var a={tables:[],ids:{},off:e};r=new Uint8Array(r.buffer,e,t);e=0;var n=Typr.B,s=n.readUshort,o=Typr.T.cmap,i=(s(r,e),s(r,e+=2));e+=2;for(var h=[],f=0;f<i;f++){var d=s(r,e),l=s(r,e+=2);e+=2;var u=n.readUint(r,e);e+=4;var p="p"+d+"e"+l,c=h.indexOf(u);if(-1==c){c=a.tables.length;var v={};h.push(u);var y=v.format=s(r,u);0==y?v=o.parse0(r,u,v):4==y?v=o.parse4(r,u,v):6==y?v=o.parse6(r,u,v):12==y&&(v=o.parse12(r,u,v)),a.tables.push(v)}if(null!=a.ids[p])throw"multiple tables for one platform+encoding";a.ids[p]=c}return a},parse0:function(r,e,t){var a=Typr.B;e+=2;var n=a.readUshort(r,e);e+=2;a.readUshort(r,e);e+=2,t.map=[];for(var s=0;s<n-6;s++)t.map.push(r[e+s]);return t},parse4:function(r,e,t){var a=Typr.B,n=a.readUshort,s=a.readUshorts,o=e,i=n(r,e+=2),h=(n(r,e+=2),n(r,e+=2));e+=2;var f=h>>>1;t.searchRange=n(r,e),e+=2,t.entrySelector=n(r,e),e+=2,t.rangeShift=n(r,e),e+=2,t.endCount=s(r,e,f),e+=2*f,e+=2,t.startCount=s(r,e,f),e+=2*f,t.idDelta=[];for(var d=0;d<f;d++)t.idDelta.push(a.readShort(r,e)),e+=2;return t.idRangeOffset=s(r,e,f),e+=2*f,t.glyphIdArray=s(r,e,o+i-e>>>1),t},parse6:function(r,e,t){var a=Typr.B;e+=2;a.readUshort(r,e);e+=2;a.readUshort(r,e);e+=2,t.firstCode=a.readUshort(r,e),e+=2;var n=a.readUshort(r,e);e+=2,t.glyphIdArray=[];for(var s=0;s<n;s++)t.glyphIdArray.push(a.readUshort(r,e)),e+=2;return t},parse12:function(r,e,t){var a=Typr.B.readUint,n=(a(r,e+=4),a(r,e+=4),3*a(r,e+=4));e+=4;for(var s=t.groups=new Uint32Array(n),o=0;o<n;o+=3)s[o]=a(r,e+(o<<2)),s[o+1]=a(r,e+(o<<2)+4),s[o+2]=a(r,e+(o<<2)+8);return t}},Typr.T.glyf={parseTab:function(r,e,t,a){for(var n=[],s=a.maxp.numGlyphs,o=0;o<s;o++)n.push(null);return n},_parseGlyf:function(r,e){var t=Typr.B,a=r._data,n=r.loca;if(n[e]==n[e+1])return null;var s=Typr.findTable(a,"glyf",r._offset)[0]+n[e],o={};if(o.noc=t.readShort(a,s),s+=2,o.xMin=t.readShort(a,s),s+=2,o.yMin=t.readShort(a,s),s+=2,o.xMax=t.readShort(a,s),s+=2,o.yMax=t.readShort(a,s),s+=2,o.xMin>=o.xMax||o.yMin>=o.yMax)return null;if(o.noc>0){o.endPts=[];for(var i=0;i<o.noc;i++)o.endPts.push(t.readUshort(a,s)),s+=2;var h=t.readUshort(a,s);if(s+=2,a.length-s<h)return null;o.instructions=t.readBytes(a,s,h),s+=h;var f=o.endPts[o.noc-1]+1;o.flags=[];for(i=0;i<f;i++){var d=a[s];if(s++,o.flags.push(d),0!=(8&d)){var l=a[s];s++;for(var u=0;u<l;u++)o.flags.push(d),i++}}o.xs=[];for(i=0;i<f;i++){var p=0!=(2&o.flags[i]),c=0!=(16&o.flags[i]);p?(o.xs.push(c?a[s]:-a[s]),s++):c?o.xs.push(0):(o.xs.push(t.readShort(a,s)),s+=2)}o.ys=[];for(i=0;i<f;i++){p=0!=(4&o.flags[i]),c=0!=(32&o.flags[i]);p?(o.ys.push(c?a[s]:-a[s]),s++):c?o.ys.push(0):(o.ys.push(t.readShort(a,s)),s+=2)}var v=0,y=0;for(i=0;i<f;i++)v+=o.xs[i],y+=o.ys[i],o.xs[i]=v,o.ys[i]=y}else{var g;o.parts=[];do{g=t.readUshort(a,s),s+=2;var T={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(o.parts.push(T),T.glyphIndex=t.readUshort(a,s),s+=2,1&g){var m=t.readShort(a,s);s+=2;var S=t.readShort(a,s);s+=2}else{m=t.readInt8(a,s);s++;S=t.readInt8(a,s);s++}2&g?(T.m.tx=m,T.m.ty=S):(T.p1=m,T.p2=S),8&g?(T.m.a=T.m.d=t.readF2dot14(a,s),s+=2):64&g?(T.m.a=t.readF2dot14(a,s),s+=2,T.m.d=t.readF2dot14(a,s),s+=2):128&g&&(T.m.a=t.readF2dot14(a,s),s+=2,T.m.b=t.readF2dot14(a,s),s+=2,T.m.c=t.readF2dot14(a,s),s+=2,T.m.d=t.readF2dot14(a,s),s+=2)}while(32&g);if(256&g){var U=t.readUshort(a,s);s+=2,o.instr=[];for(i=0;i<U;i++)o.instr.push(a[s]),s++}}return o}},Typr.T.head={parseTab:function(r,e,t){var a=Typr.B,n={};a.readFixed(r,e);e+=4,n.fontRevision=a.readFixed(r,e),e+=4;a.readUint(r,e);e+=4;a.readUint(r,e);return e+=4,n.flags=a.readUshort(r,e),e+=2,n.unitsPerEm=a.readUshort(r,e),e+=2,n.created=a.readUint64(r,e),e+=8,n.modified=a.readUint64(r,e),e+=8,n.xMin=a.readShort(r,e),e+=2,n.yMin=a.readShort(r,e),e+=2,n.xMax=a.readShort(r,e),e+=2,n.yMax=a.readShort(r,e),e+=2,n.macStyle=a.readUshort(r,e),e+=2,n.lowestRecPPEM=a.readUshort(r,e),e+=2,n.fontDirectionHint=a.readShort(r,e),e+=2,n.indexToLocFormat=a.readShort(r,e),e+=2,n.glyphDataFormat=a.readShort(r,e),e+=2,n}},Typr.T.hhea={parseTab:function(r,e,t){var a=Typr.B,n={};a.readFixed(r,e);e+=4;for(var s=["ascender","descender","lineGap","advanceWidthMax","minLeftSideBearing","minRightSideBearing","xMaxExtent","caretSlopeRise","caretSlopeRun","caretOffset","res0","res1","res2","res3","metricDataFormat","numberOfHMetrics"],o=0;o<s.length;o++){var i=s[o],h="advanceWidthMax"==i||"numberOfHMetrics"==i?a.readUshort:a.readShort;n[i]=h(r,e+2*o)}return n}},Typr.T.hmtx={parseTab:function(r,e,t,a){for(var n=Typr.B,s=[],o=[],i=a.maxp.numGlyphs,h=a.hhea.numberOfHMetrics,f=0,d=0,l=0;l<h;)f=n.readUshort(r,e+(l<<2)),d=n.readShort(r,e+(l<<2)+2),s.push(f),o.push(d),l++;for(;l<i;)s.push(f),o.push(d),l++;return{aWidth:s,lsBearing:o}}},Typr.T.kern={parseTab:function(r,e,t,a){var n=Typr.B,s=Typr.T.kern;if(1==n.readUshort(r,e))return s.parseV1(r,e,t,a);var o=n.readUshort(r,e+2);e+=4;for(var i={glyph1:[],rval:[]},h=0;h<o;h++){e+=2;t=n.readUshort(r,e);e+=2;var f=n.readUshort(r,e);e+=2;var d=f>>>8;0==(d&=15)&&(e=s.readFormat0(r,e,i))}return i},parseV1:function(r,e,t,a){var n=Typr.B,s=Typr.T.kern,o=(n.readFixed(r,e),n.readUint(r,e+4));e+=8;for(var i={glyph1:[],rval:[]},h=0;h<o;h++){n.readUint(r,e);e+=4;var f=n.readUshort(r,e);e+=2;n.readUshort(r,e);e+=2,0==(255&f)&&(e=s.readFormat0(r,e,i))}return i},readFormat0:function(r,e,t){var a=Typr.B,n=a.readUshort,s=-1,o=n(r,e);n(r,e+2),n(r,e+4),n(r,e+6);e+=8;for(var i=0;i<o;i++){var h=n(r,e),f=n(r,e+=2);e+=2;var d=a.readShort(r,e);e+=2,h!=s&&(t.glyph1.push(h),t.rval.push({glyph2:[],vals:[]}));var l=t.rval[t.rval.length-1];l.glyph2.push(f),l.vals.push(d),s=h}return e}},Typr.T.loca={parseTab:function(r,e,t,a){var n=Typr.B,s=[],o=a.head.indexToLocFormat,i=a.maxp.numGlyphs+1;if(0==o)for(var h=0;h<i;h++)s.push(n.readUshort(r,e+(h<<1))<<1);if(1==o)for(h=0;h<i;h++)s.push(n.readUint(r,e+(h<<2)));return s}},Typr.T.maxp={parseTab:function(r,e,t){var a=Typr.B,n=a.readUshort,s={};a.readUint(r,e);return e+=4,s.numGlyphs=n(r,e),e+=2,s}},Typr.T.name={parseTab:function(r,e,t){var a=Typr.B,n={};a.readUshort(r,e);e+=2;var s=a.readUshort(r,e);e+=2;a.readUshort(r,e);for(var o=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],i=e+=2,h=a.readUshort,f=0;f<s;f++){var d=h(r,e),l=h(r,e+=2),u=h(r,e+=2),p=h(r,e+=2),c=h(r,e+=2),v=h(r,e+=2);e+=2;var y,g=i+12*s+v;0==d?y=a.readUnicode(r,g,c/2):3==d&&0==l?y=a.readUnicode(r,g,c/2):0==l?y=a.readASCII(r,g,c):1==l?y=a.readUnicode(r,g,c/2):3==l?y=a.readUnicode(r,g,c/2):4==l?y=a.readUnicode(r,g,c/2):10==l?y=a.readUnicode(r,g,c/2):1==d?(y=a.readASCII(r,g,c),console.log("reading unknown MAC encoding "+l+" as ASCII")):(console.log("unknown encoding "+l+", platformID: "+d),y=a.readASCII(r,g,c));var T="p"+d+","+u.toString(16);null==n[T]&&(n[T]={}),n[T][o[p]]=y,n[T]._lang=u}var m,S="postScriptName";for(var U in n)if(null!=n[U][S]&&1033==n[U]._lang)return n[U];for(var U in n)if(null!=n[U][S]&&0==n[U]._lang)return n[U];for(var U in n)if(null!=n[U][S]&&3084==n[U]._lang)return n[U];for(var U in n)if(null!=n[U][S])return n[U];for(var U in n){m=n[U];break}return console.log("returning name table with languageID "+m._lang),null==m[S]&&null!=m.ID&&(m[S]=m.ID),m}},Typr.T.OS2={parseTab:function(r,e,t){var a=Typr.B.readUshort(r,e);e+=2;var n=Typr.T.OS2,s={};if(0==a)n.version0(r,e,s);else if(1==a)n.version1(r,e,s);else if(2==a||3==a||4==a)n.version2(r,e,s);else{if(5!=a)throw"unknown OS/2 table version: "+a;n.version5(r,e,s)}return s},version0:function(r,e,t){var a=Typr.B;return t.xAvgCharWidth=a.readShort(r,e),e+=2,t.usWeightClass=a.readUshort(r,e),e+=2,t.usWidthClass=a.readUshort(r,e),e+=2,t.fsType=a.readUshort(r,e),e+=2,t.ySubscriptXSize=a.readShort(r,e),e+=2,t.ySubscriptYSize=a.readShort(r,e),e+=2,t.ySubscriptXOffset=a.readShort(r,e),e+=2,t.ySubscriptYOffset=a.readShort(r,e),e+=2,t.ySuperscriptXSize=a.readShort(r,e),e+=2,t.ySuperscriptYSize=a.readShort(r,e),e+=2,t.ySuperscriptXOffset=a.readShort(r,e),e+=2,t.ySuperscriptYOffset=a.readShort(r,e),e+=2,t.yStrikeoutSize=a.readShort(r,e),e+=2,t.yStrikeoutPosition=a.readShort(r,e),e+=2,t.sFamilyClass=a.readShort(r,e),e+=2,t.panose=a.readBytes(r,e,10),e+=10,t.ulUnicodeRange1=a.readUint(r,e),e+=4,t.ulUnicodeRange2=a.readUint(r,e),e+=4,t.ulUnicodeRange3=a.readUint(r,e),e+=4,t.ulUnicodeRange4=a.readUint(r,e),e+=4,t.achVendID=a.readASCII(r,e,4),e+=4,t.fsSelection=a.readUshort(r,e),e+=2,t.usFirstCharIndex=a.readUshort(r,e),e+=2,t.usLastCharIndex=a.readUshort(r,e),e+=2,t.sTypoAscender=a.readShort(r,e),e+=2,t.sTypoDescender=a.readShort(r,e),e+=2,t.sTypoLineGap=a.readShort(r,e),e+=2,t.usWinAscent=a.readUshort(r,e),e+=2,t.usWinDescent=a.readUshort(r,e),e+=2},version1:function(r,e,t){var a=Typr.B;return e=Typr.T.OS2.version0(r,e,t),t.ulCodePageRange1=a.readUint(r,e),e+=4,t.ulCodePageRange2=a.readUint(r,e),e+=4},version2:function(r,e,t){var a=Typr.B,n=a.readUshort;return e=Typr.T.OS2.version1(r,e,t),t.sxHeight=a.readShort(r,e),e+=2,t.sCapHeight=a.readShort(r,e),e+=2,t.usDefault=n(r,e),e+=2,t.usBreak=n(r,e),e+=2,t.usMaxContext=n(r,e),e+=2},version5:function(r,e,t){var a=Typr.B.readUshort;return e=Typr.T.OS2.version2(r,e,t),t.usLowerOpticalPointSize=a(r,e),e+=2,t.usUpperOpticalPointSize=a(r,e),e+=2}},Typr.T.post={parseTab:function(r,e,t){var a=Typr.B,n={};return n.version=a.readFixed(r,e),e+=4,n.italicAngle=a.readFixed(r,e),e+=4,n.underlinePosition=a.readShort(r,e),e+=2,n.underlineThickness=a.readShort(r,e),e+=2,n}},Typr.T.SVG={parseTab:function(r,e,t){var a=Typr.B,n={entries:[]},s=e;a.readUshort(r,e);e+=2;var o=a.readUint(r,e);e+=4;a.readUint(r,e);e+=4,e=o+s;var i=a.readUshort(r,e);e+=2;for(var h=0;h<i;h++){var f=a.readUshort(r,e);e+=2;var d=a.readUshort(r,e);e+=2;var l=a.readUint(r,e);e+=4;var u=a.readUint(r,e);e+=4;for(var p=new Uint8Array(r.buffer,s+l+o,u),c=a.readUTF8(p,0,p.length),v=f;v<=d;v++)n.entries[v]=c}return n}},Typr.U={shape:function(r,e,t){for(var a=function(r,e,t,a){var n=e[t],s=e[t+1],o=r.kern;if(o){var i=o.glyph1.indexOf(n);if(-1!=i){var h=o.rval[i].glyph2.indexOf(s);if(-1!=h)return[0,0,o.rval[i].vals[h],0]}}return[0,0,0,0]},n=[],s=0;s<e.length;s++){var o=e.codePointAt(s);o>65535&&s++,n.push(Typr.U.codeToGlyph(r,o))}var i=[];for(s=0;s<n.length;s++){var h=a(r,n,s),f=n[s],d=r.hmtx.aWidth[f]+h[2];i.push({g:f,cl:s,dx:0,dy:0,ax:d,ay:0}),d}return i},shapeToPath:function(r,e,t){for(var a={cmds:[],crds:[]},n=0,s=0,o=0;o<e.length;o++){for(var i=e[o],h=Typr.U.glyphToPath(r,i.g),f=h.crds,d=0;d<f.length;d+=2)a.crds.push(f[d]+n+i.dx),a.crds.push(f[d+1]+s+i.dy);t&&a.cmds.push(t);for(d=0;d<h.cmds.length;d++)a.cmds.push(h.cmds[d]);var l=a.cmds.length;t&&0!=l&&"X"!=a.cmds[l-1]&&a.cmds.push("X"),n+=i.ax,s+=i.ay}return{cmds:a.cmds,crds:a.crds}},codeToGlyph:function(r,e){for(var t=r.cmap,a=-1,n=["p3e10","p0e4","p3e1","p1e0","p0e3","p0e1"],s=0;s<n.length;s++)if(null!=t.ids[n[s]]){a=t.ids[n[s]];break}if(-1==a)throw"no familiar platform and encoding!";var o=function(r,e,t){for(var a=0,n=Math.floor(r.length/e);a+1!=n;){var s=a+(n-a>>>1);r[s*e]<=t?a=s:n=s}return a*e},i=t.tables[a],h=i.format,f=-1;if(0==h)f=e>=i.map.length?0:i.map[e];else if(4==h){var d=-1,l=i.endCount;if(e>l[l.length-1]?d=-1:l[d=o(l,1,e)]<e&&d++,-1==d)f=0;else if(e<i.startCount[d])f=0;else{f=65535&(0!=i.idRangeOffset[d]?i.glyphIdArray[e-i.startCount[d]+(i.idRangeOffset[d]>>1)-(i.idRangeOffset.length-d)]:e+i.idDelta[d])}}else if(6==h){var u=e-i.firstCode,p=i.glyphIdArray;f=u<0||u>=p.length?0:p[u]}else{if(12!=h)throw"unknown cmap table format "+i.format;var c=i.groups;e>c[c.length-2]?f=0:(c[s=o(c,3,e)]<=e&&e<=c[s+1]&&(f=c[s+2]+(e-c[s])),-1==f&&(f=0))}var v=r["SVG "],y=r.loca;return 0==f||null!=r["CFF "]||null!=v&&null!=v.entries[f]||y[f]!=y[f+1]||-1!=[9,10,11,12,13,32,133,160,5760,8232,8233,8239,12288,6158,8203,8204,8205,8288,65279].indexOf(e)||8192<=e&&e<=8202||(f=0),f},glyphToPath:function(r,e){var t={cmds:[],crds:[]},a=r["SVG "],n=r["CFF "],s=Typr.U;if(a&&a.entries[e]){var o=a.entries[e];null!=o&&("string"==typeof o&&(o=s.SVG.toPath(o),a.entries[e]=o),t=o)}else if(n){var i=n.Private,h={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:i?i.defaultWidthX:0,open:!1};if(n.ROS){for(var f=0;n.FDSelect[f+2]<=e;)f+=2;i=n.FDArray[n.FDSelect[f+1]].Private}s._drawCFF(n.CharStrings[e],h,n,i,t)}else r.glyf&&s._drawGlyf(e,r,t);return{cmds:t.cmds,crds:t.crds}},_drawGlyf:function(r,e,t){var a=e.glyf[r];null==a&&(a=e.glyf[r]=Typr.T.glyf._parseGlyf(e,r)),null!=a&&(a.noc>-1?Typr.U._simpleGlyph(a,t):Typr.U._compoGlyph(a,e,t))},_simpleGlyph:function(r,e){for(var t=Typr.U.P,a=0;a<r.noc;a++){for(var n=0==a?0:r.endPts[a-1]+1,s=r.endPts[a],o=n;o<=s;o++){var i=o==n?s:o-1,h=o==s?n:o+1,f=1&r.flags[o],d=1&r.flags[i],l=1&r.flags[h],u=r.xs[o],p=r.ys[o];if(o==n)if(f){if(!d){t.MoveTo(e,u,p);continue}t.MoveTo(e,r.xs[i],r.ys[i])}else d?t.MoveTo(e,r.xs[i],r.ys[i]):t.MoveTo(e,Math.floor(.5*(r.xs[i]+u)),Math.floor(.5*(r.ys[i]+p)));f?d&&t.LineTo(e,u,p):l?t.qCurveTo(e,u,p,r.xs[h],r.ys[h]):t.qCurveTo(e,u,p,Math.floor(.5*(u+r.xs[h])),Math.floor(.5*(p+r.ys[h])))}t.ClosePath(e)}},_compoGlyph:function(r,e,t){for(var a=0;a<r.parts.length;a++){var n={cmds:[],crds:[]},s=r.parts[a];Typr.U._drawGlyf(s.glyphIndex,e,n);for(var o=s.m,i=0;i<n.crds.length;i+=2){var h=n.crds[i],f=n.crds[i+1];t.crds.push(h*o.a+f*o.b+o.tx),t.crds.push(h*o.c+f*o.d+o.ty)}for(i=0;i<n.cmds.length;i++)t.cmds.push(n.cmds[i])}},pathToSVG:function(r,e){var t=r.cmds,a=r.crds;null==e&&(e=5);for(var n=[],s=0,o={M:2,L:2,Q:4,C:6},i=0;i<t.length;i++){var h=t[i],f=s+(o[h]?o[h]:0);for(n.push(h);s<f;){var d=a[s++];n.push(parseFloat(d.toFixed(e))+(s==f?"":" "))}}return n.join("")},SVGToPath:function(r){var e={cmds:[],crds:[]};return Typr.U.SVG.svgToPath(r,e),{cmds:e.cmds,crds:e.crds}},pathToContext:function(r,e){for(var t=0,a=r.cmds,n=r.crds,s=0;s<a.length;s++){var o=a[s];"M"==o?(e.moveTo(n[t],n[t+1]),t+=2):"L"==o?(e.lineTo(n[t],n[t+1]),t+=2):"C"==o?(e.bezierCurveTo(n[t],n[t+1],n[t+2],n[t+3],n[t+4],n[t+5]),t+=6):"Q"==o?(e.quadraticCurveTo(n[t],n[t+1],n[t+2],n[t+3]),t+=4):"#"==o.charAt(0)?(e.beginPath(),e.fillStyle=o):"Z"==o?e.closePath():"X"==o&&e.fill()}},P:{MoveTo:function(r,e,t){r.cmds.push("M"),r.crds.push(e,t)},LineTo:function(r,e,t){r.cmds.push("L"),r.crds.push(e,t)},CurveTo:function(r,e,t,a,n,s,o){r.cmds.push("C"),r.crds.push(e,t,a,n,s,o)},qCurveTo:function(r,e,t,a,n){r.cmds.push("Q"),r.crds.push(e,t,a,n)},ClosePath:function(r){r.cmds.push("Z")}},_drawCFF:function(r,e,t,a,n){for(var s=e.stack,o=e.nStems,i=e.haveWidth,h=e.width,f=e.open,d=0,l=e.x,u=e.y,p=0,c=0,v=0,y=0,g=0,T=0,m=0,S=0,U=0,C=0,b=Typr.T.CFF,x=Typr.U.P,F=a.nominalWidthX,B={val:0,size:0};d<r.length;){b.getCharString(r,d,B);var I=B.val;if(d+=B.size,"o1"==I||"o18"==I)s.length%2!=0&&!i&&(h=s.shift()+F),o+=s.length>>1,s.length=0,i=!0;else if("o3"==I||"o23"==I){s.length%2!=0&&!i&&(h=s.shift()+F),o+=s.length>>1,s.length=0,i=!0}else if("o4"==I)s.length>1&&!i&&(h=s.shift()+F,i=!0),f&&x.ClosePath(n),u+=s.pop(),x.MoveTo(n,l,u),f=!0;else if("o5"==I)for(;s.length>0;)l+=s.shift(),u+=s.shift(),x.LineTo(n,l,u);else if("o6"==I||"o7"==I)for(var M=s.length,w="o6"==I,_=0;_<M;_++){var A=s.shift();w?l+=A:u+=A,w=!w,x.LineTo(n,l,u)}else if("o8"==I||"o24"==I){M=s.length;for(var P=0;P+6<=M;)p=l+s.shift(),c=u+s.shift(),v=p+s.shift(),y=c+s.shift(),l=v+s.shift(),u=y+s.shift(),x.CurveTo(n,p,c,v,y,l,u),P+=6;"o24"==I&&(l+=s.shift(),u+=s.shift(),x.LineTo(n,l,u))}else{if("o11"==I)break;if("o1234"==I||"o1235"==I||"o1236"==I||"o1237"==I)"o1234"==I&&(c=u,v=(p=l+s.shift())+s.shift(),C=y=c+s.shift(),T=y,S=u,l=(m=(g=(U=v+s.shift())+s.shift())+s.shift())+s.shift(),x.CurveTo(n,p,c,v,y,U,C),x.CurveTo(n,g,T,m,S,l,u)),"o1235"==I&&(p=l+s.shift(),c=u+s.shift(),v=p+s.shift(),y=c+s.shift(),U=v+s.shift(),C=y+s.shift(),g=U+s.shift(),T=C+s.shift(),m=g+s.shift(),S=T+s.shift(),l=m+s.shift(),u=S+s.shift(),s.shift(),x.CurveTo(n,p,c,v,y,U,C),x.CurveTo(n,g,T,m,S,l,u)),"o1236"==I&&(p=l+s.shift(),c=u+s.shift(),v=p+s.shift(),C=y=c+s.shift(),T=y,m=(g=(U=v+s.shift())+s.shift())+s.shift(),S=T+s.shift(),l=m+s.shift(),x.CurveTo(n,p,c,v,y,U,C),x.CurveTo(n,g,T,m,S,l,u)),"o1237"==I&&(p=l+s.shift(),c=u+s.shift(),v=p+s.shift(),y=c+s.shift(),U=v+s.shift(),C=y+s.shift(),g=U+s.shift(),T=C+s.shift(),m=g+s.shift(),S=T+s.shift(),Math.abs(m-l)>Math.abs(S-u)?l=m+s.shift():u=S+s.shift(),x.CurveTo(n,p,c,v,y,U,C),x.CurveTo(n,g,T,m,S,l,u));else if("o14"==I){if(s.length>0&&!i&&(h=s.shift()+t.nominalWidthX,i=!0),4==s.length){var D=s.shift(),O=s.shift(),k=s.shift(),G=s.shift(),L=b.glyphBySE(t,k),W=b.glyphBySE(t,G);Typr.U._drawCFF(t.CharStrings[L],e,t,a,n),e.x=D,e.y=O,Typr.U._drawCFF(t.CharStrings[W],e,t,a,n)}f&&(x.ClosePath(n),f=!1)}else if("o19"==I||"o20"==I){s.length%2!=0&&!i&&(h=s.shift()+F),o+=s.length>>1,s.length=0,i=!0,d+=o+7>>3}else if("o21"==I)s.length>2&&!i&&(h=s.shift()+F,i=!0),u+=s.pop(),l+=s.pop(),f&&x.ClosePath(n),x.MoveTo(n,l,u),f=!0;else if("o22"==I)s.length>1&&!i&&(h=s.shift()+F,i=!0),l+=s.pop(),f&&x.ClosePath(n),x.MoveTo(n,l,u),f=!0;else if("o25"==I){for(;s.length>6;)l+=s.shift(),u+=s.shift(),x.LineTo(n,l,u);p=l+s.shift(),c=u+s.shift(),v=p+s.shift(),y=c+s.shift(),l=v+s.shift(),u=y+s.shift(),x.CurveTo(n,p,c,v,y,l,u)}else if("o26"==I)for(s.length%2&&(l+=s.shift());s.length>0;)p=l,c=u+s.shift(),l=v=p+s.shift(),u=(y=c+s.shift())+s.shift(),x.CurveTo(n,p,c,v,y,l,u);else if("o27"==I)for(s.length%2&&(u+=s.shift());s.length>0;)c=u,v=(p=l+s.shift())+s.shift(),y=c+s.shift(),l=v+s.shift(),u=y,x.CurveTo(n,p,c,v,y,l,u);else if("o10"==I||"o29"==I){var R="o10"==I?a:t;if(0==s.length)console.log("error: empty stack");else{var V=s.pop(),N=R.Subrs[V+R.Bias];e.x=l,e.y=u,e.nStems=o,e.haveWidth=i,e.width=h,e.open=f,Typr.U._drawCFF(N,e,t,a,n),l=e.x,u=e.y,o=e.nStems,i=e.haveWidth,h=e.width,f=e.open}}else if("o30"==I||"o31"==I){var z=s.length,X=(P=0,"o31"==I);for(P+=z-(M=-3&z);P<M;)X?(c=u,v=(p=l+s.shift())+s.shift(),u=(y=c+s.shift())+s.shift(),M-P==5?(l=v+s.shift(),P++):l=v,X=!1):(p=l,c=u+s.shift(),v=p+s.shift(),y=c+s.shift(),l=v+s.shift(),M-P==5?(u=y+s.shift(),P++):u=y,X=!0),x.CurveTo(n,p,c,v,y,l,u),P+=4}else{if("o"==(I+"").charAt(0))throw console.log("Unknown operation: "+I,r),I;s.push(I)}}}e.x=l,e.y=u,e.nStems=o,e.haveWidth=i,e.width=h,e.open=f},SVG:function(){var r={getScale:function(r){return Math.sqrt(Math.abs(r[0]*r[3]-r[1]*r[2]))},translate:function(e,t,a){r.concat(e,[1,0,0,1,t,a])},rotate:function(e,t){r.concat(e,[Math.cos(t),-Math.sin(t),Math.sin(t),Math.cos(t),0,0])},scale:function(e,t,a){r.concat(e,[t,0,0,a,0,0])},concat:function(r,e){var t=r[0],a=r[1],n=r[2],s=r[3],o=r[4],i=r[5];r[0]=t*e[0]+a*e[2],r[1]=t*e[1]+a*e[3],r[2]=n*e[0]+s*e[2],r[3]=n*e[1]+s*e[3],r[4]=o*e[0]+i*e[2]+e[4],r[5]=o*e[1]+i*e[3]+e[5]},invert:function(r){var e=r[0],t=r[1],a=r[2],n=r[3],s=r[4],o=r[5],i=e*n-t*a;r[0]=n/i,r[1]=-t/i,r[2]=-a/i,r[3]=e/i,r[4]=(a*o-n*s)/i,r[5]=(t*s-e*o)/i},multPoint:function(r,e){var t=e[0],a=e[1];return[t*r[0]+a*r[2]+r[4],t*r[1]+a*r[3]+r[5]]},multArray:function(r,e){for(var t=0;t<e.length;t+=2){var a=e[t],n=e[t+1];e[t]=a*r[0]+n*r[2]+r[4],e[t+1]=a*r[1]+n*r[3]+r[5]}}};function e(r,e,t){for(var a=[],n=0,s=0,o=0;;){var i=r.indexOf(e,s),h=r.indexOf(t,s);if(-1==i&&-1==h)break;-1==h||-1!=i&&i<h?(0==o&&(a.push(r.slice(n,i).trim()),n=i+1),o++,s=i+1):(-1==i||-1!=h&&h<i)&&(0==--o&&(a.push(r.slice(n,h).trim()),n=h+1),s=h+1)}return a}function t(t){for(var n=e(t,"(",")"),s=[1,0,0,1,0,0],o=0;o<n.length;o+=2){var i=s;s=a(n[o],n[o+1]),r.concat(s,i)}return s}function a(e,t){for(var a=[1,0,0,1,0,0],n=!0,s=0;s<t.length;s++){var o=t.charAt(s);","==o||" "==o?n=!0:"."==o?(n||(t=t.slice(0,s)+","+t.slice(s),s++),n=!1):"-"==o&&s>0&&"e"!=t[s-1]&&(t=t.slice(0,s)+" "+t.slice(s),s++,n=!0)}if(t=t.split(/\s*[\s,]\s*/).map(parseFloat),"translate"==e)1==t.length?r.translate(a,t[0],0):r.translate(a,t[0],t[1]);else if("scale"==e)1==t.length?r.scale(a,t[0],t[0]):r.scale(a,t[0],t[1]);else if("rotate"==e){var i=0,h=0;1!=t.length&&(i=t[1],h=t[2]),r.translate(a,-i,-h),r.rotate(a,-Math.PI*t[0]/180),r.translate(a,i,h)}else"matrix"==e?a=t:console.log("unknown transform: ",e);return a}function n(r,e,t){for(var a=e;a<r.length&&"string"!=typeof r[a];)a+=t;return(a-e)/t}function s(r,e){for(var t=function(r){for(var e=[],t=0,a=!1,n="",s="";t<r.length;){var o=r.charCodeAt(t),i=r.charAt(t);t++;var h=48<=o&&o<=57||"."==i||"-"==i||"e"==i||"E"==i;a?"-"==i&&"e"!=s||"."==i&&-1!=n.indexOf(".")?(e.push(parseFloat(n)),n=i):h?n+=i:(e.push(parseFloat(n)),","!=i&&" "!=i&&e.push(i),a=!1):h?(n=i,a=!0):","!=i&&" "!=i&&e.push(i),s=i}return a&&e.push(parseFloat(n)),e}(r),a=0,s=0,o=0,i=0,h=0,f=e.crds.length,d={M:2,L:2,H:1,V:1,T:2,S:4,A:7,Q:4,C:6},l=e.cmds,u=e.crds;a<t.length;){var p=t[a];a++;var c=p.toUpperCase();if("Z"==c)l.push("Z"),s=i,o=h;else for(var v=n(t,a,d[c]),y=0;y<v;y++){1==y&&"M"==c&&(p=p==c?"L":"l",c="L");var g=0,T=0;if(p!=c&&(g=s,T=o),"M"==c)s=g+t[a++],o=T+t[a++],l.push("M"),u.push(s,o),i=s,h=o;else if("L"==c)s=g+t[a++],o=T+t[a++],l.push("L"),u.push(s,o);else if("H"==c)s=g+t[a++],l.push("L"),u.push(s,o);else if("V"==c)o=T+t[a++],l.push("L"),u.push(s,o);else if("Q"==c){var m=g+t[a++],S=T+t[a++],U=g+t[a++],C=T+t[a++];l.push("Q"),u.push(m,S,U,C),s=U,o=C}else if("T"==c){m=s+s-u[F=Math.max(u.length-2,f)],S=o+o-u[F+1],U=g+t[a++],C=T+t[a++];l.push("Q"),u.push(m,S,U,C),s=U,o=C}else if("C"==c){m=g+t[a++],S=T+t[a++],U=g+t[a++],C=T+t[a++];var b=g+t[a++],x=T+t[a++];l.push("C"),u.push(m,S,U,C,b,x),s=b,o=x}else if("S"==c){var F;m=s+s-u[F=Math.max(u.length-("C"==l[l.length-1]?4:2),f)],S=o+o-u[F+1],U=g+t[a++],C=T+t[a++],b=g+t[a++],x=T+t[a++];l.push("C"),u.push(m,S,U,C,b,x),s=b,o=x}else if("A"==c){m=s,S=o;var B=t[a++],I=t[a++],M=t[a++]*(Math.PI/180),w=t[a++],_=t[a++];U=g+t[a++],C=T+t[a++];if(U==s&&C==o&&0==B&&0==I)continue;var A=(m-U)/2,P=(S-C)/2,D=Math.cos(M),O=Math.sin(M),k=D*A+O*P,G=-O*A+D*P,L=B*B,W=I*I,R=k*k,V=G*G,N=(L*W-L*V-W*R)/(L*V+W*R),z=(w!=_?1:-1)*Math.sqrt(Math.max(N,0)),X=z*(B*G)/I,E=I*k*-z/B,H=D*X-O*E+(m+U)/2,q=O*X+D*E+(S+C)/2,Q=function(r,e,t,a){var n=(r*t+e*a)/(Math.sqrt(r*r+e*e)*Math.sqrt(t*t+a*a));return(r*a-e*t>=0?1:-1)*Math.acos(Math.max(-1,Math.min(1,n)))},Y=(k-X)/B,Z=(G-E)/I,j=Q(1,0,Y,Z),J=Q(Y,Z,(-k-X)/B,(-G-E)/I);!function(r,e,t,a,n,s,o){var i=function(r,e){var t=Math.sin(e),a=Math.cos(e),n=(e=r[0],r[1]),s=r[2],o=r[3];r[0]=e*a+n*t,r[1]=-e*t+n*a,r[2]=s*a+o*t,r[3]=-s*t+o*a},h=function(r,e){for(var t=0;t<e.length;t+=2){var a=e[t],n=e[t+1];e[t]=r[0]*a+r[2]*n+r[4],e[t+1]=r[1]*a+r[3]*n+r[5]}},f=function(r,e){for(var t=0;t<e.length;t++)r.push(e[t])};if(o)for(;s>n;)s-=2*Math.PI;else for(;s<n;)s+=2*Math.PI;var d=(s-n)/4,l=Math.cos(d/2),u=-Math.sin(d/2),p=(4-l)/3,c=0==u?u:(1-l)*(3-l)/(3*u),v=[p,c,p,-c,l,-u],y={cmds:["C","C","C","C"],crds:v.slice(0)},g=[1,0,0,1,0,0];i(g,-d);for(var T=0;T<3;T++)h(g,v),f(y.crds,v);i(g,d/2-n),g[0]*=a,g[1]*=a,g[2]*=a,g[3]*=a,g[4]=e,g[5]=t,h(g,y.crds),h(r.ctm,y.crds),function(r,e){f(r.cmds,e.cmds),f(r.crds,e.crds)}(r.pth,y)}({pth:e,ctm:[B*D,B*O,-I*O,I*D,H,q]},0,0,1,j,j+(J%=2*Math.PI),0==_),s=U,o=C}else console.log("Unknown SVG command "+p)}}}return{cssMap:function(r){for(var t=e(r,"{","}"),a={},n=0;n<t.length;n+=2)for(var s=t[n].split(","),o=0;o<s.length;o++){var i=s[o].trim();null==a[i]&&(a[i]=""),a[i]+=t[n+1]}return a},readTrnf:t,svgToPath:s,toPath:function(e){var a={cmds:[],crds:[]};if(null==e)return a;var n=(new DOMParser).parseFromString(e,"image/svg+xml").getElementsByTagName("svg")[0],o=n.getAttribute("viewBox");o=o?o.trim().split(" ").map(parseFloat):[0,0,1e3,1e3],function e(a,n,o){for(var i=0;i<a.length;i++){var h=a[i],f=h.tagName,d=h.getAttribute("fill");if(null==d&&(d=o),"g"==f){var l={crds:[],cmds:[]};e(h.children,l,d);var u=h.getAttribute("transform");if(u){var p=t(u);r.multArray(p,l.crds)}n.crds=n.crds.concat(l.crds),n.cmds=n.cmds.concat(l.cmds)}else if("path"==f||"circle"==f||"ellipse"==f){var c;if(n.cmds.push(d||"#000000"),"path"==f&&(c=h.getAttribute("d")),"circle"==f||"ellipse"==f){for(var v=[0,0,0,0],y=["cx","cy","rx","ry","r"],g=0;g<5;g++){var T=h.getAttribute(y[g]);T&&(T=parseFloat(T),g<4?v[g]=T:v[2]=v[3]=T)}var m=v[0],S=v[1],U=v[2],C=v[3];c=["M",m-U,S,"a",U,C,0,1,0,2*U,0,"a",U,C,0,1,0,2*-U,0].join(" ")}s(c,n),n.cmds.push("X")}}}(n.children,a);for(var i=0;i<a.crds.length;i+=2){var h=a.crds[i],f=a.crds[i+1];h-=o[0],f=-(f-=o[1]),a.crds[i]=h,a.crds[i+1]=f}return a}}}(),initHB:function(r,e){var t=function(r){var e=0;return 0==(4294967168&r)?e=1:0==(4294965248&r)?e=2:0==(4294901760&r)?e=3:0==(4292870144&r)&&(e=4),e},a=new window.TextEncoder("utf8");fetch(r).then(function(r){return r.arrayBuffer()}).then(function(r){return WebAssembly.instantiate(r)}).then(function(r){console.log("HB ready");var n=r.instance.exports,s=n.memory;s.grow(700);var o,i,h,f,d,l=new Uint8Array(s.buffer),u=new Uint32Array(s.buffer),p=new Int32Array(s.buffer);Typr.U.shapeHB=function(r,e,s){var c=r._data,v=r.name.postScriptName;o!=v&&(null!=i&&(n.hb_blob_destroy(i),n.free(h),n.hb_face_destroy(f),n.hb_font_destroy(d)),h=n.malloc(c.byteLength),l.set(c,h),i=n.hb_blob_create(h,c.byteLength,2,0,0),f=n.hb_face_create(i,0),d=n.hb_font_create(f),o=v);var y=n.hb_buffer_create(),g=a.encode(e),T=g.length,m=n.malloc(T);l.set(g,m),n.hb_buffer_add_utf8(y,m,T,0,T),n.free(m),n.hb_buffer_set_direction(y,s?4:5),n.hb_buffer_guess_segment_properties(y),n.hb_shape(d,y,0,0);var S=function(r){for(var e=n.hb_buffer_get_length(r),t=[],a=n.hb_buffer_get_glyph_infos(r,0)>>>2,s=n.hb_buffer_get_glyph_positions(r,0)>>>2,o=0;o<e;++o){var i=a+5*o,h=s+5*o;t.push({g:u[i+0],cl:u[i+2],ax:p[h+0],ay:p[h+1],dx:p[h+2],dy:p[h+3]})}return t}(y);n.hb_buffer_destroy(y);var U=S.slice(0);s||U.reverse();for(var C=0,b=0,x=1;x<U.length;x++){for(var F=U[x],B=F.cl;;){var I=e.codePointAt(C),M=t(I);if(!(b+M<=B))break;b+=M,C+=I<=65535?1:2}F.cl=C}return S},e()})}};export default Typr;